# 游戏指南 AI 运行指南

## 📋 运行步骤

### 1. 创建 Supabase 数据库表

首先需要在 Supabase 中创建 `game_guides` 表：

1. 登录 [Supabase Dashboard](https://app.supabase.com)
2. 选择你的项目
3. 点击左侧菜单的 **SQL Editor**
4. 新建查询，复制并执行 `supabase_schema.sql` 文件中的 SQL 语句

### 2. 配置环境变量

在项目根目录创建 `.env.local` 文件（如果还没有的话）：

```env
# Deepseek API 密钥
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# Supabase 配置
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# Supabase Service Role Key (用于服务端操作，如插入数据)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

**获取 Supabase 配置：**
- 在 Supabase Dashboard 中，进入 **Settings** > **API**
- `NEXT_PUBLIC_SUPABASE_URL` 是 Project URL
- `NEXT_PUBLIC_SUPABASE_ANON_KEY` 是 anon/public key
- `SUPABASE_SERVICE_ROLE_KEY` 是 service_role key（⚠️ 保密，仅在服务端使用）

**获取 Deepseek API Key：**
- 访问 [Deepseek Platform](https://platform.deepseek.com/)
- 注册/登录账号
- 在 API Keys 页面创建新的 API Key

### 3. 安装依赖（如果需要）

依赖已经安装，但如果遇到问题，可以重新安装：

```bash
cd "ai game master/resume-frontend"
npm install
```

### 4. 启动开发服务器

```bash
cd "ai game master/resume-frontend"
npm run dev
```

开发服务器将在 http://localhost:3000 启动

### 5. 测试应用

1. 打开浏览器访问 http://localhost:3000
2. 在搜索框中输入游戏名称（例如：`Elden Ring`、`Cyberpunk 2077`）
3. 点击 "Generate Guide" 按钮
4. 等待 AI 生成游戏指南

## 🔧 常见问题

### 问题 1: 环境变量未配置
**错误信息**: `Deepseek API 密钥未配置` 或 `Supabase 环境变量未配置`

**解决方法**: 确保 `.env.local` 文件存在且包含所有必需的环境变量

### 问题 2: Supabase 连接失败
**错误信息**: 数据库查询错误

**解决方法**: 
- 检查 Supabase 项目是否正常运行
- 确认环境变量中的 URL 和密钥是否正确
- 确认 `game_guides` 表已创建

### 问题 3: Deepseek API 错误
**错误信息**: `Deepseek API 错误: ...`

**解决方法**:
- 检查 API Key 是否正确
- 确认账号有足够的余额
- 检查网络连接

### 问题 4: 端口被占用
**错误信息**: `Port 3000 is already in use`

**解决方法**:
- 关闭占用 3000 端口的其他程序
- 或使用 `npm run dev -- -p 3001` 指定其他端口

## 📝 可用命令

```bash
# 开发模式
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm run start

# 代码检查
npm run lint
```

## 🎯 功能说明

- **缓存机制**: 首次查询的游戏会调用 Deepseek API 生成指南并保存到数据库
- **快速响应**: 后续相同游戏的查询会直接从数据库读取，速度更快
- **不区分大小写**: 搜索支持不区分大小写的匹配
- **Markdown 渲染**: 生成的指南支持 Markdown 格式，包括标题、列表、粗体等
